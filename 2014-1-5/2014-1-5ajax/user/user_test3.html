<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>用户注册ajax接口测试 - 智能社 - www.zhinengshe.com</title>
<link type="text/css" rel="stylesheet" href="style/common.css">
<script src="ajax.js"></script>
<script>
function json2url(json)
{
	
	//'act=add&user=xxx&pass=xxx&t=0.234234' 

	json.t=Math.random();
	var arr=[];
	
	for(var i in json)
	{
		        //  'act=add'
		arr.push(i+'='+encodeURIComponent(json[i]));	
	};

	return arr.join('&');

};



window.onload=function()
{
	var oBtn1=document.getElementById('add_btn');
	var user1=document.getElementById('add_user');
	var pass1=document.getElementById('add_pass');
	
	
	oBtn1.onclick=function()
	{
		var userValue=user1.value;
		var passValue=pass1.value;
		
		//var url='user.php?act=add&user='+userValue+'&pass='+passValue+'&t='+Math.random();
		
		var url='user.php?'+json2url({
			act:'add',
			user:userValue,
			pass:passValue
		});
		
		//'act=add&user=xxx&pass=xxx&t=0.234234'
		

		ajax(url,function(str){
			 
			 var json=eval('('+str+')');
			 
			 if(json.error)
			 {
				 alert(json.desc);
			 }
			 else
			 {
				//  0 -成功
					
					
				alert(json.desc);	
						 
			 }
			 
			 
			 
			 
			 
				
		},function(){
			
			alert(失败)	
		});
		
			
			
	};
		
};


</script>
</head>

<body>
<!--登陆-->
<div class="loginBox">
	<ul class="loginList clearfix">
    	<li class="hTxt">用户注册</li>
        <li class="inputBox">
        	<input type="text" class="inputs" id="add_user">
        </li>
        <li class="inputBox">
        	<input type="password" class="inputs" id="add_pass">
        </li>
        <li class="btns">
            <input id="add_btn" type="button" class="reg" value="" />
        </li>
        <li class="look"><a href="user_view.php" target="_blank">查看已注册用户</a></li>
    </ul>
</div>
<!--注册-->
<div class="loginBox">
	<ul class="loginList clearfix">
    	<li class="hTxt">用户登陆</li>
        <li class="inputBox">
        	<input type="text" class="inputs" id="login_user">
        </li>
        <li class="inputBox">
        	<input type="password" class="inputs" id="login_pass">
        </li>
        <li class="btns">
            <input id="login_btn" type="button" class="login" value="" />
        </li>
    </ul>
</div>
</body>
</html>
